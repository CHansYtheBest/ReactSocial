(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){e.exports=a.p+"static/media/Settings.5689f116.svg"},101:function(e,t,a){e.exports=a.p+"static/media/Copyright.d173cafa.svg"},102:function(e,t,a){e.exports={dialogs:"dialogs_dialogs__RiuJg"}},108:function(e,t,a){e.exports=a(253)},11:function(e,t,a){e.exports={navigation:"nav_navigation__10nKZ",active:"nav_active__3mV4U",navigation_Separator:"nav_navigation_Separator__-dZvY",navigation_Container:"nav_navigation_Container__1FhZC",logo:"nav_logo__3iafb",logo_Container:"nav_logo_Container__-V5Jo",logo_Link:"nav_logo_Link__3nO6Q",logo_Img:"nav_logo_Img__EVCWN",logo_Text:"nav_logo_Text__2AXcp",logo_Separator:"nav_logo_Separator__2LMoK",navigation_List:"nav_navigation_List__2k2Am",navigation_Img:"nav_navigation_Img__8Vtlg",copyright:"nav_copyright__35Quy",copyright_Separator:"nav_copyright_Separator__axE39",copyright_Img:"nav_copyright_Img__16LWm",copyright_Text:"nav_copyright_Text__1LAVS"}},115:function(e,t,a){},13:function(e,t,a){e.exports={header:"Header_header__1uO6l",searchbar:"Header_searchbar__3fS2y",searchbar_Input:"Header_searchbar_Input__2FQt1",searchbar_Img:"Header_searchbar_Img__1J5mh",navigation:"Header_navigation__3ZF8H",iconLink:"Header_iconLink__20eXY",profilePreview:"Header_profilePreview__20Zqx",profilePreview_container:"Header_profilePreview_container__1Jcvl",profilePreview_avatar:"Header_profilePreview_avatar__2RPCo"}},144:function(e,t,a){},153:function(e,t,a){},25:function(e,t,a){e.exports={content:"profile_content__3-FFx",statusNoEdit:"profile_statusNoEdit__Mg3bh"}},253:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(89),l=a.n(o),c=(a(115),function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,254)).then(function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),o(e),l(e)})}),i=a(15),s=a(2),u=a(54),m=u.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"2c5b76b2-e1a1-4e88-b0db-fc9b4812f59e"}});function g(e){return u.all([m.get("profile/status/".concat(e)).then(function(e){return e.data}),m.get("profile/".concat(e)).then(function(e){return e.data})])}var d={userId:0,fullName:"",avatar:{small:"",large:""},aboutMe:"",status:"",contacts:{facebook:"facebook.com",website:"",vk:"vk.com/",twitter:"https://twitter.com/",instagram:"instagram.com/",youtube:"",github:"github.com",mainLink:""},lookingForAJob:!0,lookingForAJobDescription:"Ye, I can do thing. Pls, I need money",posts:[],isFetching:!1},f=function(e){return{type:"TOGGLE_IS_FETCHING",value:e}},p=a(4),E={dialogData:[{id:0,name:"Yoo Yu"},{id:1,name:"Karen McChicken"},{id:2,name:"Crazy Dave"},{id:3,name:"Pop Bob"},{id:4,name:"Poop Boob"}],messagesData:[{dialogid:0,dialog:[{id:0,from:"me",message:"Yoo, my guy. How's life?"},{id:1,from:"him",message:"Peepo, hello. My life has been cool."},{id:2,from:"me",message:"I'm glad to hear that, my dear friend."},{id:3,from:"me",message:"Would you like to hang out?"},{id:4,from:"him",message:"Yes, indeed I would."}],newMessageText:""},{dialogid:1,dialog:[{id:0,from:"me",message:"Ms. Karen, I would like to submit my school project."},{id:1,from:"him",message:"no"},{id:2,from:"me",message:"Why?"}],newMessageText:""},{dialogid:2,dialog:[{id:0,from:"him",message:"I am in your walls Peepo."},{id:1,from:"him",message:"Peepo, you can't hide."},{id:2,from:"him",message:"You can't escape Peepo."},{id:3,from:"him",message:"I think about you when I go to sleep"},{id:4,from:"me",message:"Dave, please stop."}],newMessageText:""},{dialogid:3,dialog:[{id:0,from:"me",message:"Hey, Bob. I hate you."},{id:1,from:"him",message:":("},{id:2,from:"me",message:"Sorry, I was joking."}],newMessageText:""},{dialogid:4,dialog:[{id:0,from:"me",message:"Hey, Boob. I love you."},{id:1,from:"him",message:":)"},{id:2,from:"him",message:"Thanks."}],newMessageText:""}]},h={users:[],count:8,currentPage:1,totalItems:1,isFetching:!1,buttonIsFetching:[]},_=function(e){return{type:"SET_USERS",users:e}},b=function(e){return{type:"SET_TOTAL_ITEMS",totalItems:e}},v=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},F=function(e){return{type:"TOGGLE_SEARCH_IS_FETCHING",fetching:e}},P=function(e,t){return{type:"SET_BUTTON_IS_FETCHING",fetching:e,userID:t}},S=function(e,t,a,n,r){return function(o){o(F(!0)),a!==t&&o(v(Number(t))),function(e,t,a){return m.get("users?count=".concat(e,"&page=").concat(t,"&friend=").concat(a)).then(function(e){return e.data})}(n,t,r).then(function(a){o(_(a.items)),o(b(a.totalCount)),o(F(!1));var r=Math.ceil(a.totalCount/n);console.log(t,r),t>r&&e("/search/1")}).catch(function(t){console.error(t),e("/search/1")})}},y=function(e){return function(t){var a;t(P(!0,e)),(a=e,m.delete("follow/".concat(a)).then(function(e){if(0===e.data.resultCode)return a})).then(function(a){t(function(e){return{type:"UNFOLLOW",userID:e}}(a)),t(P(!1,e))})}},O=function(e){return function(t){var a;t(P(!0,e)),(a=e,m.post("follow/".concat(a),{}).then(function(e){if(0===e.data.resultCode)return a})).then(function(a){t(function(e){return{type:"FOLLOW",userID:e}}(a)),t(P(!1,e))})}},T={id:null,email:null,login:null,isAuth:null,loginError:null,myProfile:{fullName:"",avatar:{small:"",large:""},aboutMe:"",status:"",contacts:{facebook:"facebook.com",website:"",vk:"vk.com/",twitter:"https://twitter.com/",instagram:"instagram.com/",youtube:"",github:"github.com",mainLink:""},lookingForAJob:!0,lookingForAJobDescription:"Ye, I can do thing. Pls, I need money",posts:[]},hasFetched:!1,isFetching:!1},I=function(e){return{type:"SET_IS_AUTH",isAuth:e}},N=function(e){return{type:"SET_LOGIN_ERROR",loginError:e}},A=function(e){return{type:"TOGGLE_MY_IS_FETCHING",value:e}},k=function(e){return{type:"SET_MY_STATUS",status:e}},j=function(e){return{type:"HAS_FETCHED_PROFILE",bull:e}},L=function(){return function(e,t){var a=t().auth.id;e(A(!0)),g(a).then(function(t){var a=Object(s.a)({},t[1],{status:t[0]});console.log(a),e(function(e){return{type:"SET_ALL_MY_PROFILE_INFO",data:e}}(a,Object.keys(a).forEach(function(e){a[e]=null===a[e]?"":a[e]}),Object.keys(a.photos).forEach(function(e){a.photos[e]=null===a.photos[e]?"https://cdn-icons-png.flaticon.com/512/21/21104.png":a.photos[e]}),Object.keys(a.contacts).forEach(function(e){a.contacts[e]=null===a.contacts[e]?"":a.contacts[e]}))),e(k(null===a.status?"":a.status)),e({type:"SET_MY_POSTS",posts:[]}),e(A(!1)),e(j(!0))}).catch(function(t){console.error(t),e(A(!1)),e(j(!0))})}},w=function(){return function(e){m.get("auth/me").then(function(e){return 0===e.data.resultCode&&e.data}).then(function(t){if(!1!==t){var a=t.data,n=a.id,r=a.email,o=a.login;e(function(e,t,a){return{type:"SET_USER_DATA",data:{id:e,email:t,login:a}}}(n,r,o)),e(I(!0))}else e(I(!1))})}},C=function(e){return function(t){t(A(!0)),function(e){return m.put("profile/status",{status:e}).then(function(e){return e})}(e).then(function(a){t(k(e)),t(A(!1))})}},M=function(e,t,a){return function(n){(function(e,t,a){return m.post("auth/login",{email:e,password:t,rememberMe:a}).then(function(e){return e})})(e,t,a).then(function(e){0===e.data.resultCode?n(w()):n(N(e.data.messages[0]))})}},D=a(90),x=Object(i.b)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERID":return Object(s.a)({},e,{userId:t.userId});case"SET_ALL_PROFILE_INFO":return Object(s.a)({},e,{fullName:t.data.fullName,avatar:t.data.photos,aboutMe:t.data.aboutMe,lookingForAJob:t.data.lookingForAJob,lookingForAJobDescription:t.data.lookingForAJobDescription,contacts:t.data.contacts});case"SET_ERROR":return Object(s.a)({},e,{errorMessage:t.error.data.message,errorStatus:t.error.status});case"SET_POSTS":return Object(s.a)({},e,{posts:t.posts});case"SET_STATUS":return Object(s.a)({},e,{status:t.status});case"TOGGLE_IS_FETCHING":return Object(s.a)({},e,{isFetching:t.value});default:return e}},dialogsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,a=e.messagesData.findIndex(function(e){return e.dialogid===Number(t.id)});switch(t.type){case"ADD_MESSAGE":console.log(e,t);var n={id:e.messagesData[a].dialog.length.toString(),from:"me",message:e.messagesData[a].newMessageText},r=Object(s.a)({},e,{messagesData:Object(p.a)(e.messagesData)});return r.messagesData[a]={dialogid:a,newMessageText:"",dialog:[].concat(Object(p.a)(e.messagesData[a].dialog),[n])},r;case"UPDATE_MESSAGE_NEW_TEXT":var o=Object(s.a)({},e);return o.messagesData[a]=Object(s.a)({},e.messagesData[a],{newMessageText:t.content}),o;default:return e}},searchPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(s.a)({},e,{users:e.users.map(function(e){return e.id===t.userID?Object(s.a)({},e,{followed:!0}):e})});case"UNFOLLOW":return Object(s.a)({},e,{users:e.users.map(function(e){return e.id===t.userID?Object(s.a)({},e,{followed:!1}):e})});case"SET_USERS":return Object(s.a)({},e,{users:t.users});case"SET_TOTAL_ITEMS":return Object(s.a)({},e,{totalItems:t.totalItems});case"SET_CURRENT_PAGE":return Object(s.a)({},e,{currentPage:t.currentPage});case"TOGGLE_SEARCH_IS_FETCHING":return Object(s.a)({},e,{isFetching:t.fetching});case"SET_BUTTON_IS_FETCHING":return Object(s.a)({},e,{buttonIsFetching:t.fetching?[].concat(Object(p.a)(e.buttonIsFetching),[t.userID]):e.buttonIsFetching.filter(function(e){return e!==t.userID})});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(s.a)({},e,t.data,{isAuth:!0});case"SET_IS_AUTH":return Object(s.a)({},e,{isAuth:t.isAuth});case"HAS_FETCHED_PROFILE":return Object(s.a)({},e,{hasFetched:t.bull});case"SET_LOGIN_ERROR":return Object(s.a)({},e,{loginError:t.loginError});case"ADD-POST":var a={id:e.posts.length,postContent:t.post};return Object(s.a)({},e,{myProfile:Object(s.a)({},e.myProfile,{posts:[].concat(Object(p.a)(e.posts),[a])})});case"SET_ALL_MY_PROFILE_INFO":return Object(s.a)({},e,{myProfile:Object(s.a)({},e.myProfile,{fullName:t.data.fullName,avatar:t.data.photos,aboutMe:t.data.aboutMe,lookingForAJob:t.data.lookingForAJob,lookingForAJobDescription:t.data.lookingForAJobDescription,contacts:t.data.contacts})});case"SET_ERROR":return Object(s.a)({},e,{errorMessage:t.error.data.message,errorStatus:t.error.status});case"SET_MY_POSTS":return Object(s.a)({},e,{myProfile:Object(s.a)({},e.myProfile,{posts:t.posts})});case"SET_MY_STATUS":return Object(s.a)({},e,{myProfile:Object(s.a)({},e.myProfile,{status:t.status})});case"SET_AVATAR":return Object(s.a)({},e,{avatar:t.avatar});case"TOGGLE_MY_IS_FETCHING":return Object(s.a)({},e,{isFetching:t.value});default:return e}}}),R=Object(i.d)(x,Object(i.a)(D.a)),H=a(7),J=(a(144),a(1)),G=a(13),U=a.n(G),Y=a(39),B=a.n(Y),Z=a(3),z=a(93),V=a.n(z),W=a(94),K=a.n(W),q=Object(n.memo)(function(e){return!0===e.isAuth?r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.b,{to:"/profile/".concat(e.id)},r.a.createElement("img",{className:U.a.profilePreview_avatar,src:e.avatar,alt:"avatar"})),r.a.createElement("div",{className:U.a.profilePreview_container},r.a.createElement(Z.b,{className:U.a.profilePreview_nameLink,to:"/profile/".concat(e.id)},e.login),r.a.createElement(Z.b,{className:U.a.profilePreview_Link,to:"/profile/".concat(e.id)},"View")),r.a.createElement("button",{className:U.a.profilePreview_Link,onClick:e.logout},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.c,{to:"/login"},"LOGIN"))}),X=Object(n.memo)(function(e){return r.a.createElement("header",{className:U.a.header},r.a.createElement("div",{className:U.a.searchbar},r.a.createElement("input",{className:U.a.searchbar_Input,type:"text",placeholder:"Search..."})," ",r.a.createElement("img",{className:U.a.searchbar_Img,src:B.a,alt:""})),r.a.createElement("div",{className:U.a.navigation},r.a.createElement(Z.b,{className:U.a.iconLink,to:"/dialog"},r.a.createElement("img",{src:V.a,alt:""})),r.a.createElement(Z.b,{className:U.a.iconLink,to:"/notification"},r.a.createElement("img",{src:K.a,alt:""})),r.a.createElement("div",{className:U.a.profilePreview},r.a.createElement(q,{isAuth:e.auth.isAuth,avatar:e.avatar,id:e.auth.id,login:e.auth.login,logout:e.logoutThunk}))))}),Q=Object(H.b)(function(e){return{auth:e.auth,avatar:e.auth.myProfile.avatar.small}},{logoutThunk:function(){return function(e){m.delete("auth/login").then(function(e){return e}).then(function(t){e(w())})}}})(X),$=a(11),ee=a.n($),te=a(95),ae=a.n(te),ne=a(96),re=a.n(ne),oe=a(97),le=a.n(oe),ce=a(98),ie=a.n(ce),se=a(99),ue=a.n(se),me=a(100),ge=a.n(me),de=a(101),fe=a.n(de),pe=function(e){return r.a.createElement("li",null,r.a.createElement(Z.c,{to:e.to,className:function(e){return e.isActive?ee.a.active:""}},r.a.createElement("img",{className:ee.a.navigation_Img,src:e.img,alt:""}),r.a.createElement("p",null,e.text)))},Ee=function(){return r.a.createElement("nav",{className:ee.a.navigation},r.a.createElement("div",{className:ee.a.navigation_Container},r.a.createElement("section",{className:ee.a.logo},r.a.createElement("div",{className:ee.a.logo_Container},r.a.createElement(Z.b,{className:ee.a.logo_Link,to:"/"},r.a.createElement("img",{className:ee.a.logo_Img,src:ae.a,alt:"logo"}),r.a.createElement("p",{className:ee.a.logo_Text},"ReactSocial")),r.a.createElement("div",{className:ee.a.logo_Separator}))),r.a.createElement("ul",{className:ee.a.navigation_List},r.a.createElement(pe,{to:"/profile",text:"My Page",img:re.a}),r.a.createElement(pe,{to:"/feed",text:"News Feed",img:le.a}),r.a.createElement(pe,{to:"/dialog",text:"Messages",img:ie.a}),r.a.createElement(pe,{to:"/friends/1",text:"Friends",img:ue.a})),r.a.createElement("div",{className:ee.a.navigation_Separator}),r.a.createElement("ul",{className:ee.a.navigation_List},r.a.createElement(pe,{to:"/search/1",text:"Find People",img:B.a}),r.a.createElement(pe,{to:"/settings",text:"Settings",img:ge.a})),r.a.createElement("section",{className:ee.a.copyright},r.a.createElement("div",{className:ee.a.copyright_Separator}," "),r.a.createElement("div",{className:ee.a.copyright_Text},r.a.createElement("img",{className:ee.a.copyright_Img,src:fe.a,alt:""}),r.a.createElement("p",null,"2022 All rights are reserved.")),r.a.createElement("p",null,"Dybovsky & Chibotaru LLC"))))},he=function(e){return r.a.createElement("div",{className:"wrapper"},r.a.createElement(Q,null),r.a.createElement(Ee,null),r.a.createElement("div",{className:"content"},r.a.createElement(J.b,null)))},_e=function(e){return{isAuth:e.auth.isAuth}},be=function(e){return{}};function ve(e){return Object(H.b)(_e,be)(function(t){return null===t.isAuth?null:t.isAuth?r.a.createElement(e,t):r.a.createElement(J.a,{to:"/login"})})}var Fe=a(25),Pe=a.n(Fe),Se=a(55),ye=a.n(Se);function Oe(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:ye.a.preloaderContainer},r.a.createElement("div",{className:ye.a.preloader},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))))}var Te=a(5);function Ie(e){var t=Object(n.useState)(""),a=Object(Te.a)(t,2),o=a[0],l=a[1],c=function(){e.addPost(o),l("")};return r.a.createElement("div",null,r.a.createElement("input",{onKeyPress:function(e){"Enter"===e.key&&c(o)},placeholder:"Enter a new post...",value:o,onChange:function(e){l(e.target.value)}}),r.a.createElement("button",{onClick:c},"Add post"))}function Ne(e){function t(e){return r.a.createElement("div",null,r.a.createElement("p",null,"New post from ",e.name,":")," ",r.a.createElement("div",null,e.content))}function a(e){return r.a.createElement("div",null,r.a.createElement("p",null,e.name," posted:")," ",r.a.createElement("div",null,e.content))}if(0!==e.profile.posts.length){var n=e.profile.posts.length-1,o=r.a.Children.toArray(e.profile.posts.map(function(o){return o.id===n?r.a.createElement(t,{name:e.profile.fullName,content:o.postContent}):r.a.createElement(a,{name:e.profile.fullName,content:o.postContent})}));return r.a.createElement(r.a.Fragment,null,o.reverse())}return r.a.createElement("p",null,"Sadly, ",e.profile.fullName," didn't write any posts!")}function Ae(e){return r.a.createElement(r.a.Fragment,null,e.isLoggedProfile?r.a.createElement(Ie,{postNewText:e.profile.postNewText,addPost:e.addPost}):"",r.a.createElement(Ne,{profile:e.profile}))}function ke(e){return r.a.createElement("p",null,null===e.info?"":e.info)}function je(e){var t=Object(n.useState)(""),a=Object(Te.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(!1),i=Object(Te.a)(c,2),s=i[0],u=i[1];return r.a.createElement(r.a.Fragment,null,s?r.a.createElement("input",{maxLength:230,autoFocus:!0,onBlur:function(){e.setter(o),u(!1)},placeholder:"Enter...",value:o,onChange:function(e){l(e.target.value)}}):r.a.createElement("p",{className:Pe.a.statusNoEdit,onClick:function(){l(null===e.info?"":e.info),u(!0)}},null===e.info||""===e.info?"|":e.info))}function Le(e){return r.a.createElement(r.a.Fragment,null,e.isLoggedProfile?r.a.createElement(je,{info:e.info,setter:e.setter}):r.a.createElement(ke,{info:e.info}))}var we=Object(n.memo)(function(e){var t=r.a.Children.toArray(Object.keys(e.profile.contacts).map(function(t){return r.a.createElement("p",null,t.charAt(0).toUpperCase()+t.slice(1)+":",r.a.createElement("a",{href:"".concat(e.profile.contacts[t])}," ",e.profile.contacts[t]))}));return r.a.createElement("div",null,r.a.createElement("div",{className:Pe.a.profile},r.a.createElement("div",null,r.a.createElement("img",{src:e.profile.avatar.large,alt:"avatar",width:"300px",height:"300px"})),r.a.createElement("div",null,r.a.createElement("p",null,e.profile.fullName),r.a.createElement("br",null)),r.a.createElement("div",null,r.a.createElement(Le,{isLoggedProfile:e.isLoggedProfile,setter:e.setStatus,info:e.profile.status})),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("p",null,"About me:")," ",r.a.createElement("p",null,e.profile.aboutMe?e.profile.aboutMe:"null")),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("p",null,"Looking for a job:")," ",r.a.createElement("p",null,e.profile.lookingForAJob?"Yes":"No")),r.a.createElement("div",null,r.a.createElement("p",null,e.profile.lookingForAJobDescription?e.profile.lookingForAJobDescription:"null")),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("p",null,"Contacts:"),t)),r.a.createElement("div",{id:"posts"},r.a.createElement(Ae,{isLoggedProfile:e.isLoggedProfile,profile:e.profile,addPost:e.addPost})))}),Ce=Object(n.memo)(function(e){var t=Object(J.h)(),a=Number(Object(J.i)().id),o=a===e.loggedProfileId;function l(){return o?r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.c,{to:"/settings"},"Settings"),r.a.createElement(we,{isLoggedProfile:o,profile:e.auth.myProfile,addPost:e.addPost,setStatus:e.setStatus})):r.a.createElement(we,{isLoggedProfile:o,profile:e.profilePage})}return Object(n.useEffect)(function(){isNaN(a)?!0===e.auth.isAuth?t("/profile/".concat(e.loggedProfileId)):t("/profile/error"):o?e.getMyProfile():e.getProfile(a)},[a]),r.a.createElement("section",{className:Pe.a.content},e.profilePage.isFetching||e.auth.isFetching?r.a.createElement(Oe,null):r.a.createElement(l,null))}),Me=Object(i.c)(Object(H.b)(function(e){return{profilePage:e.profilePage,auth:e.auth,loggedProfileId:e.auth.id}},function(e){return{addPost:function(t){e(function(e){return{type:"ADD-POST",post:e}}(t))},toggleProfileIsFetching:function(t){e(f(t))},toggleMyIsFetchingAT:function(t){e(A(t))},getMyProfile:function(){e(L())},getProfile:function(t){e(function(e){return function(t){t(f(!0)),g(e).then(function(e){var a=Object(s.a)({},e[1],{status:e[0]});t({type:"SET_USERID",userId:a.userId}),t(function(e){return{type:"SET_ALL_PROFILE_INFO",data:e}}(a,Object.keys(a).forEach(function(e){a[e]=null===a[e]?"":a[e]}),Object.keys(a.photos).forEach(function(e){a.photos[e]=null===a.photos[e]?"https://cdn-icons-png.flaticon.com/512/21/21104.png":a.photos[e]}),Object.keys(a.contacts).forEach(function(e){a.contacts[e]=null===a.contacts[e]?"":a.contacts[e]}))),t({type:"SET_STATUS",status:null===a.status?"":a.status}),t({type:"SET_POSTS",posts:[]}),t(f(!1))}).catch(function(e){console.error(e),t(f(!1))})}}(t))},setStatus:function(t){e(C(t))}}}),ve)(Ce),De=a(9),xe=a.n(De);var Re=function(e){for(var t=Object(J.h)(),a=[],n=0;n<=e.totalPages;n++)a.push(n);var o=e.currentPage-4,l=e.currentPage+5;e.currentPage-4<=0?(o=1,l=e.currentPage+10-e.currentPage):e.currentPage+5>e.totalPages&&(l=e.totalPages+1,o=e.totalPages-8);var c=a.slice(o,l),i=function(e){t(e)},s=r.a.Children.toArray(c.map(function(t){return r.a.createElement(Z.c,{to:"/".concat(e.currentLocation,"/")+t,onClick:function(){return i(t)},className:function(){return xe.a.pagination+" "+(e.currentPage===t?xe.a.active:"")}},t)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.c,{to:"/".concat(e.currentLocation,"/")+1,onClick:function(){return i(1)},className:xe.a.pagination},"|<"),s,r.a.createElement(Z.c,{to:"/".concat(e.currentLocation,"/")+e.totalPages,onClick:function(){return i(e.totalPages)},className:xe.a.pagination},">|"))};function He(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"".concat(xe.a.friendButton," ").concat(e.buttonIsFetching.some(function(t){return t===e.id})?xe.a.friendButtonFetching:""),onClick:function(){return t=e.followed,a=e.id,void(!0===t?e.removeFriend(a):e.addFriend(a));var t,a},disabled:e.buttonIsFetching.some(function(t){return t===e.id})},e.followed?"Remove friend":"Add friend"))}function Je(e){return r.a.createElement("div",{className:xe.a.userCard},r.a.createElement("div",{className:xe.a.rightSide},r.a.createElement(Z.c,{to:"/profile/".concat(e.user.id)},r.a.createElement("img",{src:null!==e.user.photos.small?e.user.photos.small:"https://cdn-icons-png.flaticon.com/512/21/21104.png",alt:""})),r.a.createElement(He,{id:e.user.id,followed:e.user.followed,addFriend:e.addFriend,removeFriend:e.removeFriend,toggleButtonIsFetching:e.toggleButtonIsFetching,buttonIsFetching:e.buttonIsFetching})),r.a.createElement(Z.c,{to:"/profile/".concat(e.user.id)},r.a.createElement("div",{className:xe.a.leftSide},r.a.createElement("div",{className:xe.a.leftOfLeftSide},r.a.createElement("p",{className:xe.a.name},e.user.name),r.a.createElement("p",{className:xe.a.about},e.user.status),r.a.createElement("div",{className:xe.a.rightOfLeftSide})))))}var Ge=function(e){var t=Object(J.h)(),a=Object(J.g)(),o=a.pathname.split("/")[1],l=Number(Object(J.i)().id);return Object(n.useEffect)(function(){isNaN(l)?(e.toggleIsFetching(!0),t("/".concat(o,"/1"))):(0===e.users.length||e.currentPage!==l||a.pathname)&&(console.log(e.users.length,e.currentPage,a.pathname),e.getUsers(t,l,e.currentPage,e.count,e.onlyFriends))},[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:xe.a.content},e.isFetching?r.a.createElement(Oe,null):null,r.a.createElement("div",null,e.users.map(function(t){return r.a.createElement(Je,{key:t.id,addFriend:e.addFriend,removeFriend:e.removeFriend,toggleButtonIsFetching:e.toggleButtonIsFetching,buttonIsFetching:e.buttonIsFetching,user:t})})),r.a.createElement("div",{className:xe.a.paginationContainer},r.a.createElement(Re,{currentPage:e.currentPage,currentLocation:o,totalPages:Math.ceil(e.totalItems/e.count)}))))},Ue=Object(H.b)(function(e,t){return{users:e.searchPage.users,count:e.searchPage.count,totalItems:e.searchPage.totalItems,currentPage:e.searchPage.currentPage,isFetching:e.searchPage.isFetching,buttonIsFetching:e.searchPage.buttonIsFetching,onlyFriends:t.onlyFriends}},function(e){return{setUsers:function(t){e(_(t))},setTotalItems:function(t){e(b(t))},setCurrentPage:function(t){e(v(t))},toggleIsFetching:function(t){e(F(t))},addFriend:function(t){e(O(t))},removeFriend:function(t){e(y(t))},getUsers:function(t,a,n,r,o){e(S(t,a,n,r,o))}}})(Ge);function Ye(e){return r.a.createElement("h1",null,"Unknown error")}var Be=a(31),Ze=a.n(Be);function ze(e){var t=r.a.Children.toArray(e.messagesData.map(function(e){var t;return t="me"===e.from?Ze.a.me:Ze.a.him,r.a.createElement("p",{className:t}," ",e.message)}));return r.a.createElement(r.a.Fragment,null,t)}var Ve=function(e){var t=Object(J.i)().id;return r.a.createElement("div",{className:Ze.a.messages},r.a.createElement(ze,{messagesData:e.getCurrentMessagesData(t).dialog}),r.a.createElement("textarea",{placeholder:"Enter your message...",value:e.getCurrentMessagesData(t).newMessageText,onChange:function(a){var n=a.target.value;e.onTextChange(n,t)}}),r.a.createElement("button",{onClick:function(){e.addMessage(t)}},"Send message"))},We=Object(H.b)(function(e){return{getCurrentMessagesData:function(t){return e.dialogsPage.messagesData[t]}}},function(e){return{onTextChange:function(t,a){e(function(e,t){return{type:"UPDATE_MESSAGE_NEW_TEXT",content:e,id:t}}(t,a))},addMessage:function(t){e({type:"ADD_MESSAGE",id:t})}}})(Ve),Ke=a(102),qe=a.n(Ke);var Xe=function(e){var t=r.a.Children.toArray(e.dialogData.map(function(e){return r.a.createElement(Z.c,{to:"/dialog/"+e.id},e.name)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:qe.a.dialogs},t))};a(153);var Qe=function(e){return r.a.createElement("div",{className:"dialog_page"},r.a.createElement(Xe,{dialogData:e.dialogData}),r.a.createElement(J.b,null))},$e=Object(i.c)(Object(H.b)(function(e){return{dialogData:e.dialogsPage.dialogData}},function(e){return{}}),ve)(Qe),et=a(8),tt=a(21),at=function(e){return r.a.createElement(et.d,{initialValues:{email:"",password:"",rememberMe:!1},validationSchema:tt.a({email:tt.b().required("No email provided.").matches(/[a-zA-Z]/,"Login can only contain Latin letters.").email("Invalid email"),password:tt.b().required("No password provided.").matches(/[a-zA-Z]/,"Password can only contain Latin letters.")}),onSubmit:function(t,a){var n=a.setSubmitting;e.clearLoginError(),n(!1),e.login(t)}},function(t){var a=t.isSubmitting;return r.a.createElement(et.c,null,r.a.createElement("p",null,e.loginError?e.loginError:""),r.a.createElement("div",null,r.a.createElement(et.b,{placeholder:"Email",type:"email",name:"email"}),r.a.createElement(et.a,{name:"email",component:"div"})),r.a.createElement("div",null,r.a.createElement(et.b,{placeholder:"Password",type:"password",name:"password"}),r.a.createElement(et.a,{name:"password",component:"div"})),r.a.createElement("div",null,r.a.createElement(et.b,{id:"rememberMe",type:"checkbox",name:"rememberMe"}),r.a.createElement("label",{htmlFor:"rememberMe"},"Remember me")),r.a.createElement("button",{type:"submit",disabled:a},"Submit"))})};var nt=Object(H.b)(function(e){return{isAuth:e.auth.isAuth,loginError:e.auth.loginError}},function(e){return{login:function(t){e(M(t.email,t.password,t.rememberMe))},clearLoginError:function(){e(N(null))}}})(function(e){var t=Object(J.h)();return setTimeout(function(){e.isAuth&&t("/")},60),r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null),r.a.createElement("section",null,r.a.createElement("h1",null,"Login Form"),r.a.createElement("div",null,r.a.createElement(at,{login:e.login,isAuth:e.isAuth,loginError:e.loginError,clearLoginError:e.clearLoginError}))))}),rt=function(e){var t=r.a.Children.toArray(Object.keys(e.profile.contacts).map(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"".concat(e)},e.charAt(0).toUpperCase()+e.slice(1),": "),r.a.createElement(et.b,{placeholder:"Enter ".concat(e," link..."),type:"text",name:"contacts.".concat(e)}),r.a.createElement("br",null),r.a.createElement(et.a,{name:"contacts.".concat(e),component:"p"}))}));return r.a.createElement(et.d,{initialValues:{aboutMe:e.profile.aboutMe,fullName:e.profile.fullName,lookingForAJob:e.profile.lookingForAJob,lookingForAJobDescription:e.profile.lookingForAJobDescription,contacts:e.profile.contacts},validationSchema:tt.a({contacts:tt.a(function(){var t={};return Object.keys(e.profile.contacts).forEach(function(e){t[e]=tt.b().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!")}),t}())}),onSubmit:function(t,a){var n=a.setSubmitting;console.log(t),e.setNewProfileDataThunk(t),n(!1)},enableReinitialize:!0},function(e){var a=e.isSubmitting;return r.a.createElement(et.c,null,r.a.createElement("div",null,r.a.createElement("h3",null,"Name"),r.a.createElement(et.b,{placeholder:"Enter new name...",type:"text",name:"fullName"}),r.a.createElement(et.a,{name:"fullName",component:"div"})),r.a.createElement("div",null,r.a.createElement("h3",null,"About you"),r.a.createElement(et.b,{as:"textarea",placeholder:"Type something about you...",type:"text",name:"aboutMe"}),r.a.createElement(et.a,{name:"aboutMe",component:"div"})),r.a.createElement("div",null,r.a.createElement(et.b,{id:"lookingForAJob",type:"checkbox",name:"lookingForAJob"}),r.a.createElement("label",{htmlFor:"lookingForAJob"},"Are you looking for a job?")),r.a.createElement("div",null,r.a.createElement(et.b,{as:"textarea",placeholder:"Type something about your job...",type:"text",name:"lookingForAJobDescription"}),r.a.createElement(et.a,{name:"lookingForAJobDescription",component:"div"})),r.a.createElement("div",null,r.a.createElement("h3",null,"Links"),t),r.a.createElement("button",{type:"submit",disabled:a},"Save changes"))})},ot=function(e){var t=Object(n.useState)({}),a=Object(Te.a)(t,2),o=a[0],l=a[1];return r.a.createElement("div",null,r.a.createElement("img",{src:e.avatar,alt:"avatar",width:"300px",height:"300px"}),r.a.createElement("br",null),r.a.createElement("input",{type:"file",onChange:function(e){l(e.target.files[0])}}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){var t=new FormData;t.append("image",o,o.name),e.setAvatar(t,e.id)}},"Change avatar"))},lt=Object(n.memo)(function(e){return r.a.createElement(r.a.Fragment,null,e.isFetching?r.a.createElement(Oe,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(ot,{avatar:e.profile.avatar.large,setAvatar:e.setAvatarThunk,id:e.loggedProfileId}),r.a.createElement(rt,{setNewProfileDataThunk:e.setNewProfileDataThunk,getProfile:e.getMyProfileThunk,profile:e.profile,loggedProfileId:e.loggedProfileId})))}),ct=Object(i.c)(Object(H.b)(function(e){return{profile:e.auth.myProfile,loggedProfileId:e.auth.id,isFetching:e.auth.isFetching}},{getMyProfileThunk:L,setNewProfileDataThunk:function(e){return function(t){t(A(!0)),function(e){return m.put("profile",e).then(function(e){return e})}(e).then(function(e){console.log(e),t(L()),t(A(!1))}).catch(function(e){console.error(e),t(A(!1))})}},setAvatarThunk:function(e){return function(t,a){t(A(!0)),function(e){return console.log(e),m.put("profile/photo",e).then(function(e){return e})}(e).then(function(e){t(L(a().auth.id)),t(A(!1))})}}}),ve)(lt),it=Object(n.memo)(function(e){return Object(n.useEffect)(function(){e.getLoggedInThunk(),!1===e.isAuth?e.setSetHasFetchedProfile(!0):null!==e.id&&e.getMyProfileThunk()},[e.isAuth]),r.a.createElement(r.a.Fragment,null,e.isLoaded?r.a.createElement(J.e,null,r.a.createElement(J.c,{path:"/",element:r.a.createElement(he,null)},r.a.createElement(r.a.Fragment,null,r.a.createElement(J.c,{path:"/profile"},r.a.createElement(J.c,{path:"/profile",element:r.a.createElement(Me,null)}),r.a.createElement(J.c,{path:":id",element:r.a.createElement(Me,null)}),r.a.createElement(J.c,{path:"error",element:r.a.createElement(Ye,null)})),r.a.createElement(J.c,{path:"/dialog",element:r.a.createElement($e,null)},r.a.createElement(J.c,{path:":id",element:r.a.createElement(We,null)}),r.a.createElement(J.c,{path:"/dialog",element:r.a.createElement("div",null,"Please choose a dialog")})),r.a.createElement(J.c,{path:"/search/",element:r.a.createElement(Ue,{onlyFriends:!1})},r.a.createElement(J.c,{path:":id",element:r.a.createElement(Ue,null)})),r.a.createElement(J.c,{path:"/friends/",element:r.a.createElement(Ue,{onlyFriends:!0})},r.a.createElement(J.c,{path:":id",element:r.a.createElement(Ue,null)})),r.a.createElement(J.c,{path:"/settings",element:r.a.createElement(ct,null)}),r.a.createElement(J.c,{path:"*",element:""}))),r.a.createElement(J.c,{path:"/login",element:r.a.createElement(nt,null)})):r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe,null)))}),st=Object(H.b)(function(e){return{id:e.auth.id,isAuth:e.auth.isAuth,isLoaded:e.auth.hasFetched}},{getLoggedInThunk:w,getMyProfileThunk:L,setSetHasFetchedProfile:j})(it);a.d(t,"renderEverything",function(){return mt});var ut=l.a.createRoot(document.getElementById("root"));function mt(){ut.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H.a,{store:R},r.a.createElement(Z.a,null,r.a.createElement(st,{store:R,state:R.getState(),dispatch:R.dispatch.bind(R)})))))}mt(),c(console.log())},31:function(e,t,a){e.exports={messages:"messages_messages__uqc1i",me:"messages_me__2jyzr",him:"messages_him__2YuZa"}},39:function(e,t,a){e.exports=a.p+"static/media/Search.c16ab624.svg"},55:function(e,t,a){e.exports={preloaderContainer:"preloader_preloaderContainer__2Sd5v",preloader:"preloader_preloader__8IbZN",preloader1:"preloader_preloader1__2gwa4",preloader2:"preloader_preloader2__g5zX_",preloader3:"preloader_preloader3__26Pbg"}},9:function(e,t,a){e.exports={content:"search_content__3-iyf",userCard:"search_userCard__3MClR",rightSide:"search_rightSide__fu5es",leftSide:"search_leftSide__3ECIq",name:"search_name__lqYkw",paginationContainer:"search_paginationContainer__30Slk",pagination:"search_pagination__YvKxQ",active:"search_active__2MwIe",friendButton:"search_friendButton__2Oygv",friendButtonFetching:"search_friendButtonFetching____Vt3"}},93:function(e,t,a){e.exports=a.p+"static/media/Dialog.ee7d7cae.svg"},94:function(e,t,a){e.exports=a.p+"static/media/Bell.8cb64d96.svg"},95:function(e,t,a){e.exports=a.p+"static/media/Logo.b739b27c.svg"},96:function(e,t,a){e.exports=a.p+"static/media/Profile.1dab545b.svg"},97:function(e,t,a){e.exports=a.p+"static/media/Feed.52e80b6f.svg"},98:function(e,t,a){e.exports=a.p+"static/media/Message.27e86842.svg"},99:function(e,t,a){e.exports=a.p+"static/media/Friends.70e92cc5.svg"}},[[108,3,2]]]);
//# sourceMappingURL=main.b154e5a0.chunk.js.map